# 요구 모델링

- 소프트웨어 엔지니어링에서 요구 분석 - 구축될 시스템의 요구사항에 대한 명세서를 작성하는 작업으로 끝을 맺음
- 요구분석 - 문제의 시스템과 관련하여 고객의 요구를 만족시키기 위한 사양
- 요구분석 - 시스템을 구축하기에 충분한 정보를 제공하는 사양
- 요구 모델링 - 위 두가지 속성을 만족하는 시스템 명세를 작성하지만, 고객과 개발자가 동일한 방식으로 이해해야 함
- 요구 모델링은 고객과 개발자가 무엇이 개발되고 있는지에 동의하는 것을 주된 목적으로 하는 요구 명세를 생성
- 요구 분석의 주요 목표는 구축중인 시스템에 대한 형식적 또는 준 형식적 설명을 제공하는 것
- 개발자가 이해하는 솔루션 영역의 관점으로 요구를 표현하는 작업
- 요구 명세 - 요구 모델링 작업에 의한 결과는 문제 영역과 솔루션 영역이 만나는 인터페이스에 해당됨
- 모델링 - 요구를 만족하기 위하여 대상 시스템이 가져야 할 동작이나 구조를 나타내는 것
- 모델링은 아직 존재하지 않는 대상 시스템을 여러 가지 관점에서 요약하여 표현한 것
  - 비즈니스 관점 - 업무나 서비스의 흐름을 모델링
  - 정적 관점 - 시스템 내부를 구성하는 단위인 패키지나 클래스
  - 동적 관점 - 내부 요소들이 어떻게 서로 협력하여 동작하는지 나타냄

## 모델링 기초

모델링을 하는 이유

1. 복잡함을 잘 관리하기 위하여
2. 형체가 없는 소프트웨어의 구조를 시각화 하기 위하여
3. 다른 사람과 커뮤니케이션 하기 위하여
4. 문제 도메인 및 제품 요구 사항을 이해하기 위하여
5. 개발 중인 시스템을 이해하기 위하여
6. 구현하기 전에 잠재적 솔루션을 실험해보기 위하여
7. 기존 시스템의 문서화

### 관점과 추상화 수준

- 모델은 특정 관점과 추상화 수준에 따라 달라짐
- 복잡한 결과물은 다양한 수준의 추상화 된 뷰를 제공

### 소프트웨어와 모델링

- 대부분의 소프트웨어 모델은 그래픽 기호와 주석으로 구성된 시각적 다이어그램
- 소프트웨어 개발 중에 사용되는 시각적 모델은 추상 및 세부 수준, 관점에 따라 다름
- 소프트웨어를 모델링하는 관점에는 비즈니스 프로세스, 구조, 동작 세 가지 측면이 있음
- 문제 영역인 도메인 모델 - 비즈니스 프로세스를 사용하여 시스템 요구 사항을 표현하고 이해(유스케이스 다이어그램과 액티비티 다이어그램)
- 구조와 동작 측면의 모델 - 대상 시스템의 아키텍처를 설계하고 이해하는데 사용됨
- 객체 중심의 개발 - 클래스 다이어그램과 시퀀스 다이어그램

### 모델 사이의 관계

- 요구 분석 작업 결과물 중의 하나인 유스케이스 명세로부터 도메인 모델이 될 수 있는 용어, 개념, 속성, 관계 등을 찾아낼 수 있으며 이를 도메인 모델로 정리할 수 있음


- 개발이 진행되면서 요구 모델에 표현한 의미는 더 구체화되어 설계 모델, 오퍼레이션 명세, 용어집 등으로 발전

## UML

소프트웨어 모델링에 사용되는 실질적인 표준

### UML의 역사

- Grady Booch의 방법론
- James Rumbaugh의 Object-Modeling Technique(OMT)
- Ivar Jacobson의 Object-Oriented Software Engineering(OOSE)

의 주요 객체 지향 방법론의 표기법이 결합된 것

따라서 UML은 원래 객체 지향 스타일의 모델링, 설게, 프로그래밍을 지원

### UML다이어그램

- UML은 소프트웨어 모델링의 표기법이며 소프트웨어 구성 방법론이 아님
- 소프트웨어 구축을 위한 프로세스를 정하고 있지 않지만 유스케이스가 주도하고 아키텍처 중심적이며 반복, 점진적인 개발 프로세스를 권장
- 13개의 다이어그램 유형 중 6개는 구조 유형, 7개는 동작 유형. 동작 유형 중 4개는 객체 간의 상호 작용을 설명
  - 구조 다이어그램
    - 클래스 다이어그램
    - 객체 다이어그램
    - 컴포넌트 다이어그램
    - 배치 다이어그램
    - 패키지 다이어그램
    - 컴포지트 구조 다이어그램
  - 동작 다이어그램
    - 유스 케이스 다이어그램
    - 액티비티 다이어그램
    - 상태 다이어그램
  - 인터랙션 다이어그램
    - 시퀀스 다이어그램
    - 커뮤니케이션 다이어그램
    - 인터랙션 오버뷰 다이어그램
    - 타이밍 다이어그램


- UML을 이용하면 정적과 동적 두 가지의 관점의 모델링을 할 수 있음
- 모델링 언어 - 규칙에 맞는 기호와 다이어그램의 의미를 정의

### 모델링 과정

- 모델링 작업의 근본적인 목표 - 시스템에 있어야 할 클래스와 그들의 관계를 찾아내는 것(UML클래스 다이어그램으로 표현)
- 그러나 정적인 측면을 나타내는 클래스 다이어그램만으로는 충분하지 않음. 시스템의 동적인 측면인 기능과 동작 등을 표현하여야 하기 때문

1. 요구를 유스케이스로 정리하고 유스케이스 다이어그램을 작성한다
2. 클래스 후보를 찾아내고 개념적인 도메인 모델을 작성
3. 유스케이스를 기초하여 시퀀스 다이어그램을 작성한다
4. 클래스의 속성, 오퍼레이션 및 클래스 사이의 관계를 찾아 도메인 모델을 완성한다
5. 상태 다이어그램이나 액티비티 다이어그램 등 다른 다이어그램을 추가하여 UML모델을 완성
6. 서브시스템을 파악하고 전체 시스템 구조를 설계
7. 적당한 객체를 찾아내거나 커스텀화 또는 객체를 새로 설계

## 정적 모델링

- UML에서 정적 모델링의 대표적인 표현은 클래스 다이어그램 - 시스템의 도메인 개념을 나타낼 때 사용
- 객체들의 공통 구조와 동작들을 추상화시킨 것이므로 객체지향 기본 개념을 잘 알아야 함
- 객체와 속성, 연관, 집합, 상속, 다형성과 같은 개념의 의미를 정확히 이해하면 UML로 시각화할 수 있다.
- 클래스 다이어그램 - 도메인 개념과 속성 및 관계를 나타내는 중요한 모델
- 클래스 다이어그램을 그리는 작업은 응용문제를 개념화 하는 과정
- 개념화 작업의 중요한 단계는 분류(클래스는 이런 분류 작업의 최종 결과물)
- 분류 작업은 두 가지 방향으로 이루어지는데, 개별 사례들을 보고 공통점을 찾아 인식하는 확장형과 일반적인 개념의 속성, 동작들을 안에서 파악하여 개별 사례에 적용해 나가는 계획형이 있음

### 객체지향 개념

- 객체와 클래스
  객체와 클래스는 객체지향 시스템의 기본 빌딩 블록
  - 객체 - 상태, 동작, 고유 식별자를 가진 모든 것, 객체의 상태는 속성값에 의해 정의(Ex. TV 객체의 상태는 채널과 볼륨 속성값에 의해 결정됨)
  - 클래스 - 공통 속성을 공유하는 객체 집합에 대한 정의
  - 객체의 중요한 특징 - 속성과 동작
  - 클래스 개념은 모든 객체의 속성과 동작을 비롯한 객체의 집합을 정의하는 편리한 방법을 제공
- 속성과 오퍼레이션
  - 객체 - 필요한 자료 구조와 이에 수행되는 함수들을 가진 하나의 독립된 존재
  - 객체가 자료 구조를 갖는다는 것은 각 개체가 어떤 속성을 가지고 있다는 것
  - 객체가 적용될 수 있는 연산을 갖는다는 것은 각 객체가 어떤 연산을 수행할 수 있는 능력을 갖고있다는 것을 의미
- 캡슐화
  - 객체의 속성 부분과 오퍼레이션 부분을 하나로 모아서 캡슐화 한다는 개념은 여러 가지 작은 알약을 캡슐로 싸서 만든 하나의 약과 같은 개념
  - 연관된 여러 항목을 모아서 그 둘레에 캡슐을 씌워 하나로 취급하는 것
  - 설계나 분석 단계에 주어진 문제를 간단히 생각하는 추상화의 수단이 될 수 있음
  - 데이터를 이루는 객체의 속성, 오퍼레이션 등의 세부 등의 세부 사항은 차후에 생각하고 처음에는 객체라는 덩어리 단위로 개괄적으로 생각하는데 도움이 됨
  - 은닉 - 캡슐 속에 있는 항목에 대한 정보를 외부에 감추는 것
  - 정보가 외부에 은폐되어있다는 것은 자료 구조와 함수에 사용된 알고리즘을 외부에서 직접 접근하여 사용하거나 변경하지 못하게 하는 것
- 연관
  - 객체지향 시스템에서 객체는 다른 객체가 제공하는 서비스를 실행시키는 메시지를 보내 상호작용함으로써 역할을 담당
  - 메시지를 받은 객체는 요청된 서비스나 메소드를 구동시켜 그 결과를 보냄
  - 서비스를 제공하는 객체(서버)와 서비스를 요청하는 객체(클라이언트)가 상호작용하는 관계는 캡슐화의 결과
  - 어떤 객체가 다른 객체에 있는 서비스를 호출한다면 두 객체가 속하는 클래스는 서로 연관관계에 있음
  - 어떤 클래스의 객체가 서로 상호작용할 필요가 있는지 찾아내는 작업이 설계에서 필요
  - 하나 또는 그 이상의 클래스와의 관계
  - 가시성 - 객체의 접근 가능성으로, A객체와 B객체가 연관이 있다면 A에서 B객체를 알고 있어야 접근가능 하여야 함
- 상속
  - 상위 개념의 일반화된 클래스가 갖는 속성과 연산을 하위 개념의 구체화된 클래스가 그대로 물려받는 것을 의미
  - 클래스는 더 세분화되어 여러 개의 종류나 유형을 이룰 수 있으며 이를 서브 클래스라 하고 원래의 클래스를 슈퍼클래스라 함
- 다형성
  - 여러 가지 형태를 가지고 있다는 것. 여러 형태를 받아들일 수 있는 특징을 말함
  - 어떤 객체의 상태를 변화시키려면 그 객체가 소유하는 오퍼레이션을 호출하여야 함
  - 메서드 - 특정한 클래스를 위하여 오퍼레이션을 구현한 것. 다형성을 가진 시스템에서는 하나 이상의 메소드를 가진 오퍼레이션이 있는 것

### 클래스 다이어그램

- UML 다이어그램 중에서 가장 대표적인 다이어그램
- 시스템의 정적 측면을 모델링(시간 요소가 없는 모델)

**클래스**

- UML에서 클래스는 박스로 나타냄. 박스 안에는 클래스 이름을 표시. 박스 안에는 3개의 구획으로 나누어 클래스 이름 이외에 속성과 오퍼레이션을 나타낼 수 있음

**속성**

- 클래스가 갖고 있는 자료에 이름을 붙인 것
- 속성 형식
  - 가시성 - 속성에 대한 접근성을 나타냄. public(+), private(-), protected(#)로 표시
  - 속성 이름 - 속성을 나타내는 명사로 구성된 이름
  - 타입 - 속성의 타입으로 일반적으로 클래스, 인터페이스, 정수 등의 기본 타입
  - 다중성 - 자료가 참조하는 객체의 수, 속성은 배열로 표현될 수 있음
  - 디폴트 - 클래스 인스턴스가 생성될 때 속성에 할당되는 기본 값
  - 속성 - 속성에 대한 추가 속성. 흔히 사용되는 사례는 ordered, unordered, unique, nounique and readOnly 속성 등

**오퍼레이션**

- 클래스의 동작을 의미. 클래스에 속하는 객체에 대하여 적용될 메소드를 정의한 것
- 오퍼레이션 형식
  - 매개변수의 형식 - 방향 매개변수 이름 : 타입 = 디폴트 값
  - 방향 - in, out, inout 중의 하나
  - 속성 - 오퍼레이션의 추가 속성. {query}가 가장 일반적인 속성으로 오퍼레이션이 값을 리턴하고 객체의 상태를 변화시키지 않음을 의미

**정적 속성과 오퍼레이션**

- 클래스와 연관된 속성을 정적 또는 클래스 속성이라 하고, 그 값은 해당 클래스의 모든 객체 사이에 공유됨
- 클래스의 오브젝트와 연관된 속성은 인스턴스 속성이라고 하며 그 값은 각 객체마다 다름
- 정적 오퍼레이션은 클래스와 연관되며 정적 속성만 접근할 수 있음.
- 정적 오퍼레이션은 각 객체와 연관되어 있으며 호출된 객체에 대하여 작동. 정적 속성과 오퍼레이션은 밑줄은 그어 구별시킴

**관계**

- 클래스 단위 또는 객체 사이의 관계로 4가지가 존재

  - 연관

    - 객체 사이에 관련되어 링크되어 있음을 의미
    - 시간이 흘러도 유지되는 관계
    - 구조적으로 연관을 맺고 있어 정보를 참조하는 관계를 나타냄
    - 두 클래스 사이에 실선으로 표시.
    - 방향성을 나타내는 화살표가 있을 수 있으며 단방향으로만 탐색이 가능하다는 표시
    - 탐색방향과 다중성 외에 양쪽 끝에 역할 이름을 나타낼 수 있음

  - 상속

    - UML에서 일반화 관계로 모델링됨
    - 일반화는 대체 가능성을 의미하며 기존 오퍼레이션과 속성을 무시하고 자체의 새 기능을 제공할 수 있음
    - 화살표 방향은 보다 구체적인 클래스로부터 일반적인 클래스로 나감
    - 일반화 관계는 반대 방향으로 해석

  - 의존

    - 한 클래스의 변경으로 인해 다른 클래스의 변경이 필요할 수 있는 의존성
    - 점선 화살표로 표시
    - 일반적으로 한 클래스의 루틴이 의존 관계의 클래스를 매개 변수로 사용하거나 리턴값으로 반환할 때 사용

  - 구현

    - 클래스가 인터페이스를 구현한다는 것을 나타냄

      ​

## 동적 모델링

- 소프트웨어의 동적 측면은 시간의 함수로만 이해할 수 있음(Ex. 프로그램 내부 객체 간 상호작용 패턴)
- 동적 다이어그램은 정적인 클래스 다이어그램을 보완
- 상호작용 다이어그램 - 런타임에 객체가 어떻게 작동하여 결과를 완료하는가를 보여줌
- 상호작용 다이어그램의 사용처
  - 시스템 전체 동작 - 유스케이스는 시스템 전체 수준의 동작을 설명. 이 레벨의 상호작용 다이어그램은 유스케이스를 실현하는 데 필요한 높은 수준의 분석 클래스 사이에 상호작용을 모델링
  - 오퍼레이션 - 구현 수준의 상호작용 다이어그램은 주어진 시간 동안 발생하는 메소드 호출의 순서를 보여줌. 가장 일반적인 것은 클래스에 속한 하나의 오퍼레이션을 모델링하는 상호작용 다이어그램
- 종류 - 시퀀스 다이어그램/협동 다이어그램
- 시퀀스 다이어그램 - 메시지의 상대적인 순서를 더 쉽게 볼 수 있음
- 협동 다이어그램 - 상호작용과 관련된 모델 요소 간의 구조적 관계를 더 쉽게 볼 수 있음

### 시퀀스 다이어그램

- 메시지 교환을 시간적 관계로 나타낸 것

- 다이어그램의 수직축은 시간을 나타내며 시간은 위에서 아래로 흐름. 상호작용에 관여된 객체는 수평축을 따라 상단에 나열

- 객체 - "객체이름: 클래스이름"형식으로 표현. 상호작용에 참여하는 객체

- ```C++
  //객체의 표현
  :Person - Person클래스의 이름 없는 인스턴트
  kim: - 이름 없는 클래스의 kim이라는 인스턴트
  kim:Person - Person클래스의 kim이라는 인스턴트
  :Person(겹침) - Person클래스의 인스턴트의 모임
  <<jsp>>
  LoginPage - 스테레오타입 객체
  ```

- 가능한 모든 상호 작용을 나타내는 추상화된 순서를 표시할 수도 있고 가능한 것만 표시하는 경우도 있음

- 유스케이스의 이벤트 흐름을 나타내는데 사용됨

- 유스케이스에 참여하는 객체를 찾아내고 유스케이스 명세에 표현된 동작을 시스템 내부에 존재하는 객체의 메시지 교환 형태로 표현하는데 사용됨

- 이 과정에서 유스케이스가 상세화 되고 더 많은 객체와 서비스가 발견되는 것

- 작성과정

  - Step1 - 참여하는 객체를 파악 - 시퀀스 다이어그램이 나타내는 유스케이스의 자세한 이벤트를 조사하면서 참여하는 객체를 찾아냄
  - Step2 - 파악한 객체를 X축에 나열하고 라이프라인을 그음 - 파악한 객체를 나열할 때 시스템 경계를 담당하는 UI객체를 맨 왼쪽에, 다음으로 비즈니스 로직을 다루는 제어 객체, 마지막으로 자료의 접근과 저장을 위한 엔티티 클래스를 위치시킴
  - Step3 - 유스케이스에 기술된 이벤트 순서에 따라 객체의 메시지 호출을 화살표로 나타냄 - 유스케이스를 구동시키는 액터로부터 UI클래스에 보내는 명령을 표시한 후 개입하는 각 객체의 메시지 호출을 화살표로 그림. 메시지 호출이 순차적으로 일어난다는 뜻으로 Y축의 위에서 아래로 차례로 그려 나감

### 협동 다이어그램

- 기능면에서는 시퀀스 다이어그램과 동일하지만 상호작용에 참여하는 객체의 정적인 구조를 더 잘 보여줌
- 상호작용에 필요한 객체들 간의 링크를 포함한 객체 다이어그램 + 상호작용을 정의하는 객체 간의 메시지
- 링크 - 연결의 인스턴스. 클래스 다이어그램에 있는 클래스 사이에 연관이 있는 경우 협동 다이어그램의 객체 간에 링크가 있음. 개념적으로는 메시지가 이동할 수 있는 경로를 의미
- 메시지 순서는 각 메시지 앞에 표시된 십진 수 번호에 의해 결정
- 메시지의 일련 번호는 중첩 수준을 나타냄. Ex) 2.3.4의 메시지는 2.3에서 보낸 네번째 메시지
- 각 메시지에 할당된 일련번호에서 메시지의 호출 순서를 추론해야 함

### 상태 다이어그램

- 대상 시스템의 동적 동작을 모델링하는 또 다른 유형의 UML다이어그램

- 시스템의 동작을 수신 이벤트와 이에 대한 응답을 기반으로 상태 사이의 전환으로 모델링

- 상태와 상태 간 전환을 보여주는 다이어그램

- 핵심 요소는 상태, 전환, 초기 상태와 최종상태

- ```C++
  초기상태 - 작은 동그란 원 - 시스템이 시작되었을 때 머무르는 가상의 상태
  종료상태 - 작은원 + 큰 원 - 시스템이 종료되었음을 나타내는 상태
  트랜지션 - 화살표 - 하나의 상태에서 다른 상태로 이벤트에 의하여 변화됨
  레이블 - e[exp]/a1; a2 - 이벤트(e)가 발생하고 가드조건(exp)이 참이면 트랜지션이 일어나고 액션 a1, a2가 실행됨
  ```

- 미리 서브시스템이나 객체가 어떤 상태를 가질 수 있는지, 또한 그런 상태에 들어가게 하는 조건, 즉 외부 이벤트나 오퍼레이션이 무엇인지 파악하여야 함

- 어떤 상태에서 어떤 이벤트에 의하여 어떤 상태로 변환하는지가 가장 중요

### 제어 모델링

- 흐름도와 같은 제어흐름을 모델링하는 다이어그램 - 액티비티 다이어그램
- 알고리즘이나 프로세서에서 작업 절차를 모델링, 예외 처리가 포함된 흐름도와 유사, 동시성 제어 흐름도 표현 가능
- 상호작용 다이어그램을 보완. 상호작용 다이어그램은 객체에서 객체로의 제어 흐름을 모델링하고 액티비티 다이어그램은 액티비티의 흐름을 모델링
- 객체가 식별되기 전에 액티비티로 모델링하고 식별된 객체에 액티비티를 나중에 할당하는 형태로 사용
- 계산 또는 프로세스를 나타냄.
- 전환 - 하나의 액티비티에서 다른 액티비티로 제어가 넘어간다는 것을 나타냄
- 분기 및 병합 다이아몬드(Branch) - 조건부 제어 흐름을 모델링하는 데 사용됨. 분기에서 나가는 전환에는 진위 조건이 표시됨
- 문제 영역의 워크플로와 솔루션 도메인의 소프트웨어 제어흐름을 모델링할 때 사용됨
- 유스케이스는 사용자와 시스템 사이에 인터렉션을 워크플로로 설명 -> 액티비티 다이어그램으로 유스케이스를 모델링하는 것도 가능한데 유스케이스보다 더 정형화된 표현
- 스윔레인 - 액티비티에 대한 책임을 할당 - 각 액티비티를 책임질 구성 요소 또는 조직 단위를 나타냄

## 모델 검증

- 요구를 모델로 표현하는 작업도 올바르게 모델링 되었는지 확인하는 과정
- 방법
  - 리뷰 - 워크스루, 인스펙션 등 사람이 눈으로 확인하는 방법으로 체크리스트 이용
  - 테스팅 - 모델에 근거하여 테스트 데이터를 찾아내고 구현 후 테스팅 할 수 있음
  - 정형적 방법 - 요구가 정확하고 모델이 일관성이 있음을 수학적으로 증명하는 방법. 예를 들어 상태 다이어그램 안의 각 상태에 대한 조건을 식으로 나타내고 변환 과정을 검증
  - 프로토타이핑 - 예상대로 동작함을 보이기 위하여 모델을 기반으로 프로토타입을 제작
  - 요구 추적 - 모델러부터 요구를 거꾸로 추적하는 방법
- 일관성 체크
  - UML다이어그램 한쪽에 표현된 사실이 다른 UML 다이어그램의 정보와 모순되지 않아야 함. 모델 사이에 불일치하는 부분이 없는지 교차하여 검토하고 확인
  - Step1 - 유스케이스 다이어그램과 시퀀스 다이어그램에 대하여 다음 사항을 크로스체크. 각 유스케이스에 대한 명세가 기술되어 있고 매칭되는 시퀀스 다이어그램이 있는지 체크
    - 각 유스케이스를 구동하는 액터가 있는가?
    - 각 액터에 적어도 하나 이상의 유스케이스가 있는가?
    - 각 유스케이스에 대한 명세가 기술되었나?
    - 해당되는 시퀀스 다이어그램이 있는가?
  - Step2 - 시퀀스 다이어그램 안에 포함된 클래스와 메시지가 클래스 다이어그램에 빠지지 않고 표현되었는지 체크. 메시지를 받는 클레스에 메소드의 정의가 되어 있는지 확인 주의.
    - 모든 클래스가 클래스 다이어그램이 포함되어 있는가?
    - 시퀀스 다이어그램에 표현된 각 메소드에 대하여
      - 메시지를 보내는 클래스와 받는 클래스가 클래스 다이어그램에서 연결되어 있는가?
      - 메시지를 보내는 클래스 안에 메시지의 호출이 있는가?
      - 메시지를 받는 클래스 안에 메시지의 정의가 있는가?
  - Step3 - 상태 다이어그램과 클래스 다이어그램을 크로스체크